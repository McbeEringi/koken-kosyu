# ESP講習 @Koken UEC
## 目次
- ESP?
	- 概要
	- 機能
	- 種類
	- 注意事項
- NeoPixel?
	- 概要
	- 互換品
	- 注意事項
## ESP?
### 概要
- espressif社が開発しているIoTなマイコン
	- 5mm角くらいのチップ
	- モジュール?
		- チップの周りにフラッシュメモリとかコンデンサとか水晶と一緒に小さな基板に載せたもの
		- 電源繋げれば動く状態の基板
	- 開発ボード?
		- モジュールをコネクタやシリアル変換チップと一緒に基板に載せたもの
		- PCとすぐ繋げて開発できる基板
		- 普段我々が見ているのはこの姿

### 機能
- WiFi
- Bluetooth
- 性能が良い

### 種類
- ESP8266
	- 一番古い
	- Bluetoothがついてない
	- 開発環境がESP32と違う
- ESP32
	- ESP32(無印)
		- デュアルコア
		- 単にESP32と言ったらこれ
		- 入手しやすい
		- USBがついてない
			- シリアルで書き込む
	- ESP32-S3
		- デュアルコア
		- ちょっと高い
		- USBがついてる
			- USBホストにもなれる(USB OTG)
	- ESP32-C3
		- シングルコア
		- 安い
		- メインのプロセッサもRISC-Vになった
		- USBがついてる
		- Bluetooth Classicが使えない
			- BLEは使える
		- 実質ESP8266の後継
		- 今回の講習で使うのこれ

### 注意事項
- 電源もIOも3.3V
	- Arduino UNOは5V
	- 互換性のない周辺機器の例
		- 4.8V以上ないと動かない
		- 3.6V以上あると壊れる
	- 逆にESPのIOに間違えて5Vとか加えるとESPが壊れる
	- データシートはよく読もう
	- 相対的に電圧の高い部品の扱いは慎重に
- Arduinoに比べると電力食い
	- WiFi機能を使うと顕著
	- 割とアチアチになる
	- 最低限常時300mAは流せた方がいい

## NeoPixel?
### 概要
- フルカラーLED
	- RGB3色のLEDが一つずつ入っている
- 信号線一本で制御できる
	- LEDと一緒にICが入っている
	- 複数個のNeoPixelも1本の信号線で扱える
		- 数珠繋ぎにしたNeoPixelにシリアル信号をまとめて流せる
- 5mm角4端子のチップ形状であることが多い

### 互換品
- WorldSemi社が最初(多分)に売り出した
	- WS2812B
		- 本家
	- WS2813B 
		- 数珠つなぎの途切れに強くなった改良版
- 他社も互換品を売り出している
	- OptoSupply
		- LED大手
	- DONGGUAN OPSCO OPTOELECTRONICS CO., LTD
		- 秋月で売ってる
- 基本的にどれ選んでも同じ
- 選定する際の注意事項
	- 動作電圧が12Vのものがある
	- 稀にシリアル信号のフォーマットが異なるものがある
		- GRBが主流
	- 稀に信号線が特殊なものがある

### 注意事項
- 動作電圧は基本5V
	- LEDの電源に3.3Vを供給してもそもそも動かない
	- 5Vの電源に繋げて動かすと3.3Vの信号は無視される可能性がある
		- データシート読むと数字でそう書いてある
		- 解決策:「レベルシフト fet」で検索
		- でも意外と動いちゃったりする
			- 動けば正義なので問題なし
			- 動かなくても文句言えない
			- 今回の講習基板がこれ
				- 量産してて動かない個体がないかひやひやした
- チップLEDはとても熱に弱い
	- LEDがそもそも熱に弱い
	- チップ部品は物理的に小さいのですぐ熱くなる
	- はんだ付け
		- 加熱時間は最短を心掛ける
			- 予備はんだの活用
		- 放熱の時間を確保
			- 指で触ってやるだけでも冷める
		- 近くに放熱性能の高い部品をなるべく置かない
			- その部品をはんだ付けした熱が配線を伝ってLEDを破壊しに来る
			- 熱的になるべく切り離す